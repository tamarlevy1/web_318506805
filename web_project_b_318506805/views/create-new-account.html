<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TravelMe</title>

        <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="../static/style.css">
</head>

<body onload="load()">
 <nav class="navBar" id="navBar"></nav>

    <header>
        <h2 id="pagesHeader">Create New Account</h2>
    </header>

        <img class="backgroundImg" src="../static/images/background.png" alt="backgroundImg" />

 <form class="CreateAccountForm" onsubmit="return validation()">

            <div>
                <label class="CreateAccountLabels" for="username">User Name</label>
                <input class="CreateAccountInputs" type="text" id="username" name="User Name">
            </div>

            <div>
                <label class="CreateAccountLabels" for="password">Password</label>
                <input class="CreateAccountInputs" type="text" id="password" name="Password">
            </div>

            <div>
                <label class="CreateAccountLabels" for="fullname">Full Name</label>
                <input class="CreateAccountInputs" type="text" id="fullname" name="Full Name">
            </div>

            <div>
                <label class="CreateAccountLabels" for="phone-number">Phone Number</label>
                <input class="CreateAccountInputs" type="number" id="phone-number" name="Phone Number">
            </div>

            <div>
                <label class="CreateAccountLabels" for="date-of-birth">Date Of Birth</label>
                <input class="CreateAccountInputs" type="date" id="date-of-birth">
            </div>

            <div>
                <label class="CreateAccountLabels" for="user-type">User Type</label>
                <select class="CreateAccountInputs" id="user-type" name="User Type">
                     <option value="none" selected disabled hidden>
                     <option value="counselor">Counselor</option>
                     <option value="travel-organizer">Travel organizer</option>
                </select>
            </div>

            <div class="grid-2">
                <label class="CreateAccountLabels" for="experience">Experience</label>
                <textarea class="CreateAccountInputs" type="text" id="experience" rows="10" cols="50"></textarea>
                <input type="button" class="buttons" id="DoneBtn" value="Done" onclick=createNewUser()>
            </div>

 </form>

 <script src="../static/java-script.js"></script>

 <script>
    function createNewUser() {
        var usernameElem = document.getElementById('username');
        var passwordElem = document.getElementById('password');
        var fullnameElem = document.getElementById('fullname');
        var phoneNumElem = document.getElementById('phone-number');
        var dateOfBirthElem = document.getElementById('date-of-birth');
        var userTypeElem = document.getElementById('user-type');
        var experienceElem = document.getElementById('experience');

        if (validateRequiredFields()) {
            // all required fields were filled by the client
            let users = JSON.parse(localStorage.getItem('USERS')); 
            const user = new User(usernameElem.value, passwordElem.value, fullnameElem.value, phoneNumElem.value, dateOfBirthElem.value, userTypeElem.value, experienceElem.value);
            users.push(user);
            localStorage.setItem('USERS', JSON.stringify(users));
            window.location = 'login.html';
        }
    }

    function validateRequiredFields() {
        var usernameElem = document.getElementById('username');
        var passwordElem = document.getElementById('password');
        var fullnameElem = document.getElementById('fullname');
        var phoneNumElem = document.getElementById('phone-number');
        var dateOfBirthElem = document.getElementById('date-of-birth');
        var userTypeElem = document.getElementById('user-type');
        var experienceElem = document.getElementById('experience');

        if (!usernameElem.value) {
            alert('Please insert name');
            usernameElem.style.outline = '2px solid red';
            return false;
        }
        else {
            usernameElem.style.outline = 'unset';
        }

        if (!passwordElem.value) {
            alert('Please insert password');
            passwordElem.style.outline = '2px solid red';
            return false;
        }
        else {
            passwordElem.style.outline = 'unset';
        }

        if (!fullnameElem.value) {
            alert('Please insert full name');
            fullnameElem.style.outline = '2px solid red';
            return false;
        }
        else {
            fullnameElem.style.outline = 'unset';
        }

        if (!phoneNumElem.value) {
            alert('Please insert phone number');
            phoneNumElem.style.outline = '2px solid red';
            return false;
        }
        else {
            phoneNumElem.style.outline = 'unset';
        }

        if (!dateOfBirthElem.value) {
            alert('Please insert Date Of Birth');
            dateOfBirthElem.style.outline = '2px solid red';
            return false;
        }
        else {
            dateOfBirthElem.style.outline = 'unset';
        }

        if (!userTypeElem.value || userTypeElem.value==='none') {
            alert('Please choose user type');
            userTypeElem.style.outline = '2px solid red';
            return false;
        }
        else {
            userTypeElem.style.outline = 'unset';
        }

        if (!experienceElem.value) {
            alert('Please insert experience');
            experienceElem.style.outline = '2px solid red';
            return false;
        }
        else {
            experienceElem.style.outline = 'unset';
        }

        return true;
    }

 </script>
 
</body>
</html>